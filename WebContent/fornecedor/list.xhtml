<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition template="/template.xhtml">
        <ui:define name="corpo">
        <h:form id="formtable">
        <h2>Lista de Fornecedores</h2>
        <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
        <h:panelGrid columns="2" style="margin-bottom:20px;" >
            <p:button  value="Cadastrar" icon="ui-icon-plusthick" outcome="/fornecedor/form.xhtml">
               
            </p:button>

            <p:button value="Listar" icon="ui-icon-calculator" disabled="true">
               
            </p:button>
        </h:panelGrid>    
              <h:panelGrid columns="4">
         
                  <p:dataTable id="tabela" var="x" value="#{fornecedorController.listagem}" >
                      
                      <p:column headerText="Nome" width="80">
                          <h:outputText value="#{x.nome}"/>
                      </p:column>
                      <p:column headerText="Endereço" width="90">
                          <h:outputText value="#{x.endereco.descricao}" />
                      </p:column>
                     
                      <p:column headerText="Cidade" width="70">
                          <h:outputText value="#{x.endereco.bairro.cidade.descricao}" />
                      </p:column>
                      <p:column headerText="UF" width="30">
                          <h:outputText value="#{x.endereco.bairro.cidade.estado.descricao}" />
                      </p:column>
                      
                      <p:column  width="65">
                            <p:commandButton value="Detalhar" icon="ui-icon-search" oncomplete="PF('dlg2').show();" update=":formtable:dlg" style="width:110px; font-size:14px;">
                                <f:setPropertyActionListener target="#{fornecedorController.obj}" value="#{x}"  /> 
                            </p:commandButton>

                          <p:commandButton value="Editar" action="#{fornecedorController.carregarObjetoEditar}" icon="ui-icon-pencil" style="width:110px; font-size:14px;" />

                          <p:commandButton value="Excluir" action="#{fornecedorController.remover(x)}" icon="ui-icon-close" update="tabela" style="width:110px; font-size:14px;"/>

                        </p:column>
                  </p:dataTable>
  
        </h:panelGrid>
           
           <p:dialog header="Detalhes do Fornecedor" id="dlg" widgetVar="dlg2" height="630" width="500" resizable="false" closable="false">

                    <p:panel id="basic" header="Fornecedor" style="margin-bottom:20px">
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputLabel value="Id:" />  
                            <h:outputText value="#{fornecedorController.obj.id}" />
                            <h:outputLabel value="Nome:" />  
                            <h:outputText value="#{fornecedorController.obj.nome}" />
                            <h:outputLabel value="Nome Fantasia:" />  
                            <h:outputText value="#{fornecedorController.obj.nomeFantasia}" />
                            <h:outputLabel value="Codigo:" />  
                            <h:outputText value="#{fornecedorController.obj.codigo}" />
                            <h:outputLabel value="CNPJ:" />  
                            <h:outputText value="#{fornecedorController.obj.cnpj}" />
                            <h:outputLabel value="Data de Cadastro:" />  
                            <h:outputText value="#{fornecedorController.obj.dataCadastro}" />
                            <h:outputLabel value="Observações:" />  
                            <h:outputText value="#{fornecedorController.obj.observacoes}" />
                            <h:outputLabel value="Endereço:" />  
                            <h:outputText value="#{fornecedorController.obj.endereco.descricao}" />
                            <h:outputLabel value="Numero:" />  
                            <h:outputText value="#{fornecedorController.obj.endereco.numero}" />
                            <h:outputLabel value="CEP:" />  
                            <h:outputText value="#{fornecedorController.obj.endereco.cep}" />
                            <h:outputLabel value="Complemento:" />  
                            <h:outputText value="#{fornecedorController.obj.endereco.complemento}" />
                            <h:outputLabel value="Bairro:" />  
                            <h:outputText value="#{fornecedorController.obj.endereco.bairro.descricao}" />
                            <h:outputLabel value="Cidade:" />  
                            <h:outputText value="#{fornecedorController.obj.endereco.bairro.cidade.descricao}" />
                            <h:outputLabel value="Estado:" />  
                            <h:outputText value="#{fornecedorController.obj.endereco.bairro.cidade.estado.descricao}" />
                            <h:outputLabel value="Telefone:" />  
                            <h:outputText value="#{fornecedorController.obj.contato.telefone}" />
                            <h:outputLabel value="Celular:" />  
                            <h:outputText value="#{fornecedorController.obj.contato.celular}" />
                            <h:outputLabel value="Email:" />  
                            <h:outputText value="#{fornecedorController.obj.contato.email}" />
                            
                        </h:panelGrid>
                        <p:commandButton value="Fechar" oncomplete="PF('dlg2').hide();" action="#{fornecedorBean.limparObjetoDialog()}"/>
                    </p:panel>

                </p:dialog>
        
        
        </h:form>
      </ui:define>
     </ui:composition>
</html>